using UnityEngine;

namespace FallMonke;

[RequireComponent(typeof(VRRig))]
public class ParticipantManager : MonoBehaviour
{
    public Participant Info;
    public VRRig Rig;

    private void Start()
    {
    }

    public void Eliminate()
    {
        Main.Log($"{Info.Player.NickName}:{Info.Player.ActorNumber} has been eliminated");
        Info.IsDead = true;

        string message = Info.Player.IsLocal 
            ? "You have been eliminated"
            : $"{Info.Player.SanitizedNickName} has been eliminated";
        ((CustomGameManager)CustomGameManager.instance).NotificationHandler.ShowNotification(message);
    }

    // handle player leave
    private void OnDisable()
    {
        Info.IsDead = true;
        Destroy(this);

        if (!Info.Player.IsLocal && CustomGameManager.instance is CustomGameManager manager)
        {
            manager.NotificationHandler.ShowNotification($"{Info.Player.SanitizedNickName} has left the game");
        }
    }
}
